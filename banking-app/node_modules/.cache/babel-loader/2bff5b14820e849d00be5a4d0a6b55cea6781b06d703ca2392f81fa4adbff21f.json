{"ast":null,"code":"import _slicedToArray from\"C:/Users/nghia/Desktop/Learning Web Coding/banking-application/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Card from\"../UI/Card\";import styles from\"./SignupForm.module.css\";import{useContext,useReducer,useState,useEffect}from\"react\";import AuthContext from\"../../store/auth-context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var emailReducer=function emailReducer(state,action){if(action.type===\"USER_INPUT\")return{value:action.val,isValid:action.val.includes(\"@\")};if(action.type===\"INPUT_BLUR\")return{value:state.value,isValid:state.value.includes(\"@\")};return{value:\"\",isValid:false};};var passwordReducer=function passwordReducer(state,action){if(action.type===\"USER_INPUT\")return{value:action.val,isValid:action.val.trim().length>=8};if(action.type===\"INPUT_BLUR\")return{value:state.value,isValid:state.value.trim().length>=8};return{value:\"\",isValid:false};};var SignupForm=function SignupForm(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),formIsValid=_useState2[0],setFormIsValid=_useState2[1];var ctx=useContext(AuthContext);var _useReducer=useReducer(emailReducer,{value:\"\",isValid:null}),_useReducer2=_slicedToArray(_useReducer,2),emailState=_useReducer2[0],dispatchEmail=_useReducer2[1];var _useReducer3=useReducer(passwordReducer,{value:\"\",isValid:null}),_useReducer4=_slicedToArray(_useReducer3,2),passwordState=_useReducer4[0],dispatchPassword=_useReducer4[1];var emailIsValid=emailState.isValid;var passwordIsValid=passwordState.isValid;useEffect(function(){var myTimeOut=setTimeout(function(){console.log(\"In Effect\");setFormIsValid(emailIsValid&&passwordIsValid);},500);return function(){console.log(\"Clean up\");clearTimeout(myTimeOut);};},[emailIsValid,passwordIsValid]);var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),firstName=_useState4[0],setFirstName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),lastName=_useState6[0],setLastName=_useState6[1];var actionsHandler=function actionsHandler(){props.onActions(false);};var emailChangeHandler=function emailChangeHandler(event){dispatchEmail({type:\"USER_INPUT\",val:event.target.value});};var passwordChangeHandler=function passwordChangeHandler(event){dispatchPassword({type:\"USER_INPUT\",val:event.target.value});};var validateEmailHandler=function validateEmailHandler(){dispatchEmail({type:\"INPUT_BLUR\"});};var validatePasswordHandler=function validatePasswordHandler(){dispatchPassword({type:\"INPUT_BLUR\"});};var firstNameHandler=function firstNameHandler(event){setFirstName(event.target.value);};var lastNameHandler=function lastNameHandler(event){setLastName(event.target.value);};var submitHandler=function submitHandler(event){event.preventDefault();var isValidEmail=true;for(var i=0;i<ctx.users.length;i++){if(emailState.value===ctx.users[i].email){isValidEmail=false;break;}}if(isValidEmail){ctx.onSignup(firstName,lastName,emailState.value,passwordState.value);props.onActions(false);}else alert(\"Email is already registered. Please try different email. \");};return/*#__PURE__*/_jsx(Card,{className:styles.card,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.input,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"First Name\",value:firstName,onChange:firstNameHandler,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Last Name\",value:lastName,onChange:lastNameHandler,required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(styles.input,\" \").concat(emailState.isValid===false?styles.invalid:\"\"),children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Username@email.com\",value:emailState.value,onChange:emailChangeHandler,onBlur:validateEmailHandler,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(styles.input,\" \").concat(passwordState.isValid===false?styles.invalid:\"\"),children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:passwordState.value,onChange:passwordChangeHandler,onBlur:validatePasswordHandler,required:true})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.actions,children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!formIsValid,children:\"Sign up\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Forgot username/password >\"}),/*#__PURE__*/_jsx(\"p\",{onClick:actionsHandler,children:\"Have an account? Log in now >\"})]})]})});};export default SignupForm;","map":{"version":3,"names":["Card","styles","useContext","useReducer","useState","useEffect","AuthContext","jsx","_jsx","jsxs","_jsxs","emailReducer","state","action","type","value","val","isValid","includes","passwordReducer","trim","length","SignupForm","props","_useState","_useState2","_slicedToArray","formIsValid","setFormIsValid","ctx","_useReducer","_useReducer2","emailState","dispatchEmail","_useReducer3","_useReducer4","passwordState","dispatchPassword","emailIsValid","passwordIsValid","myTimeOut","setTimeout","console","log","clearTimeout","_useState3","_useState4","firstName","setFirstName","_useState5","_useState6","lastName","setLastName","actionsHandler","onActions","emailChangeHandler","event","target","passwordChangeHandler","validateEmailHandler","validatePasswordHandler","firstNameHandler","lastNameHandler","submitHandler","preventDefault","isValidEmail","i","users","email","onSignup","alert","className","card","children","onSubmit","input","placeholder","onChange","required","concat","invalid","onBlur","actions","disabled","onClick"],"sources":["C:/Users/nghia/Desktop/Learning Web Coding/banking-application/src/components/Account/SignupForm.js"],"sourcesContent":["import Card from \"../UI/Card\";\r\nimport styles from \"./SignupForm.module.css\";\r\nimport { useContext, useReducer, useState, useEffect } from \"react\";\r\nimport AuthContext from \"../../store/auth-context\";\r\n\r\nconst emailReducer = (state, action) => {\r\n  if (action.type === \"USER_INPUT\")\r\n    return { value: action.val, isValid: action.val.includes(\"@\") };\r\n\r\n  if (action.type === \"INPUT_BLUR\")\r\n    return { value: state.value, isValid: state.value.includes(\"@\") };\r\n\r\n  return { value: \"\", isValid: false };\r\n};\r\n\r\nconst passwordReducer = (state, action) => {\r\n  if (action.type === \"USER_INPUT\")\r\n    return { value: action.val, isValid: action.val.trim().length >= 8 };\r\n\r\n  if (action.type === \"INPUT_BLUR\")\r\n    return { value: state.value, isValid: state.value.trim().length >= 8 };\r\n\r\n  return { value: \"\", isValid: false };\r\n};\r\n\r\nconst SignupForm = (props) => {\r\n  const [formIsValid, setFormIsValid] = useState(false);\r\n\r\n  const ctx = useContext(AuthContext);\r\n\r\n  const [emailState, dispatchEmail] = useReducer(emailReducer, {\r\n    value: \"\",\r\n    isValid: null,\r\n  });\r\n\r\n  const [passwordState, dispatchPassword] = useReducer(passwordReducer, {\r\n    value: \"\",\r\n    isValid: null,\r\n  });\r\n\r\n  const { isValid: emailIsValid } = emailState;\r\n  const { isValid: passwordIsValid } = passwordState;\r\n\r\n  useEffect(() => {\r\n    const myTimeOut = setTimeout(() => {\r\n      console.log(\"In Effect\");\r\n      setFormIsValid(emailIsValid && passwordIsValid);\r\n    }, 500);\r\n\r\n    return () => {\r\n      console.log(\"Clean up\");\r\n      clearTimeout(myTimeOut);\r\n    };\r\n  }, [emailIsValid, passwordIsValid]);\r\n\r\n  const [firstName, setFirstName] = useState(\"\");\r\n  const [lastName, setLastName] = useState(\"\");\r\n\r\n  const actionsHandler = () => {\r\n    props.onActions(false);\r\n  };\r\n\r\n  const emailChangeHandler = (event) => {\r\n    dispatchEmail({ type: \"USER_INPUT\", val: event.target.value });\r\n  };\r\n\r\n  const passwordChangeHandler = (event) => {\r\n    dispatchPassword({ type: \"USER_INPUT\", val: event.target.value });\r\n  };\r\n\r\n  const validateEmailHandler = () => {\r\n    dispatchEmail({ type: \"INPUT_BLUR\" });\r\n  };\r\n\r\n  const validatePasswordHandler = () => {\r\n    dispatchPassword({ type: \"INPUT_BLUR\" });\r\n  };\r\n\r\n  const firstNameHandler = (event) => {\r\n    setFirstName(event.target.value);\r\n  };\r\n\r\n  const lastNameHandler = (event) => {\r\n    setLastName(event.target.value);\r\n  };\r\n\r\n  const submitHandler = (event) => {\r\n    event.preventDefault();\r\n    let isValidEmail = true;\r\n    for (let i = 0; i < ctx.users.length; i++) {\r\n      if (emailState.value === ctx.users[i].email) {\r\n        isValidEmail = false;\r\n        break;\r\n      }\r\n    }\r\n    if (isValidEmail) {\r\n      ctx.onSignup(firstName, lastName, emailState.value, passwordState.value);\r\n      props.onActions(false);\r\n    } else alert(\"Email is already registered. Please try different email. \");\r\n  };\r\n\r\n  return (\r\n    <Card className={styles.card}>\r\n      <form onSubmit={submitHandler}>\r\n        <h2>Welcome</h2>\r\n        <div className={styles.input}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"First Name\"\r\n            value={firstName}\r\n            onChange={firstNameHandler}\r\n            required\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Last Name\"\r\n            value={lastName}\r\n            onChange={lastNameHandler}\r\n            required\r\n          />\r\n        </div>\r\n        <div\r\n          className={`${styles.input} ${\r\n            emailState.isValid === false ? styles.invalid : \"\"\r\n          }`}\r\n        >\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Username@email.com\"\r\n            value={emailState.value}\r\n            onChange={emailChangeHandler}\r\n            onBlur={validateEmailHandler}\r\n            required\r\n          />\r\n        </div>\r\n        <div\r\n          className={`${styles.input} ${\r\n            passwordState.isValid === false ? styles.invalid : \"\"\r\n          }`}\r\n        >\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            value={passwordState.value}\r\n            onChange={passwordChangeHandler}\r\n            onBlur={validatePasswordHandler}\r\n            required\r\n          />\r\n        </div>\r\n        <div className={styles.actions}>\r\n          <button type=\"submit\" disabled={!formIsValid}>\r\n            Sign up\r\n          </button>\r\n          <p>Forgot username/password &gt;</p>\r\n          <p onClick={actionsHandler}>Have an account? Log in now &gt;</p>\r\n        </div>\r\n      </form>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default SignupForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}