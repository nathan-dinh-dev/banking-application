{"ast":null,"code":"import _slicedToArray from\"C:/Users/nghia/Desktop/Learning Web Coding/banking-application/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from\"./MyAccount.module.css\";import Card from\"../components/UI/Card\";import AuthContext from\"../store/auth-context\";import{useContext,useState}from\"react\";import{Link}from\"react-router-dom\";import{logout}from\"../assets\";import ConfirmModal from\"../components/ConfirmModal/ConfirmModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MyAccount=function MyAccount(){var ctx=useContext(AuthContext);var currentAccount=ctx.currentLogin;var _useState=useState(\"Deposit\"),_useState2=_slicedToArray(_useState,2),option=_useState2[0],setOption=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),amount=_useState4[0],setAmount=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isOpenModal=_useState6[0],setIsOpenModal=_useState6[1];var optionsHandler=function optionsHandler(event){setOption(event.target.value);};var amountHandler=function amountHandler(event){setAmount(event.target.value);};var logoutHandler=function logoutHandler(){ctx.onLogout();};var closeModalHandler=function closeModalHandler(){setIsOpenModal(false);setAmount(\"\");};var approveHandler=function approveHandler(){var today=new Date();console.log(today);if(option===\"Deposit\"){ctx.onDeposit(amount,\"Deposit $\".concat(amount,\" successfully on \").concat(today.toLocaleDateString(),\" \").concat(today.toLocaleTimeString()));}else if(option===\"Withdrawal\"){if(currentAccount.money>=amount){ctx.onWithdrawal(amount,\"Withdrawal $\".concat(amount,\" successfully on \").concat(today.toLocaleDateString(),\" \").concat(today.toLocaleTimeString()));}else alert(\"Sorry, you don't have enough fund to make this operation!\");}setIsOpenModal(false);setAmount(\"\");};var submitHandler=function submitHandler(event){event.preventDefault();setIsOpenModal(true);};var transactionContent=function transactionContent(){if(JSON.stringify(currentAccount)!==\"{}\"){if(currentAccount.transaction.length===0)return/*#__PURE__*/_jsx(\"h6\",{children:\"No transaction found.\"});else return/*#__PURE__*/_jsx(\"ul\",{className:styles.list,children:currentAccount.transaction.map(function(item){return/*#__PURE__*/_jsx(\"li\",{children:item},item);})});}else return\"\";};var accountContent=/*#__PURE__*/_jsxs(_Fragment,{children:[isOpenModal&&/*#__PURE__*/_jsx(ConfirmModal,{onCloseModal:closeModalHandler,onApprove:approveHandler,amount:amount,option:option}),/*#__PURE__*/_jsxs(\"main\",{className:styles[\"flex-wrap\"],children:[/*#__PURE__*/_jsx(Card,{className:styles.container,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.welcome,children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Hi \",currentAccount.firstName]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Available balance: $\",currentAccount.money]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:logoutHandler,children:/*#__PURE__*/_jsx(\"img\",{src:logout,alt:\"Log out gif\",id:styles.logout})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.options,children:[/*#__PURE__*/_jsxs(\"label\",{for:\"options\",children:[\"Would you like to \",/*#__PURE__*/_jsx(\"b\",{children:\"deposit\"}),\" or \",/*#__PURE__*/_jsx(\"b\",{children:\"withdrawal\"}),\" money?\"]}),/*#__PURE__*/_jsxs(\"select\",{name:\"options\",id:\"options\",onChange:optionsHandler,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Deposit\",selected:true,children:\"Deposit\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Withdrawal\",children:\"Withdrawal\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.amount,children:[/*#__PURE__*/_jsx(\"label\",{for:\"amount\",children:\"Amount: \"}),/*#__PURE__*/_jsx(\"input\",{id:\"amount\",type:\"number\",onChange:amountHandler,min:\"0\",max:\"5000\",value:amount,require:true})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.actions,children:/*#__PURE__*/_jsx(\"button\",{className:option===\"Deposit\"?styles.deposit:\"\",children:option})})]})}),/*#__PURE__*/_jsxs(Card,{className:styles[\"transaction-container\"],children:[/*#__PURE__*/_jsx(\"div\",{className:styles.transaction,children:/*#__PURE__*/_jsx(\"h3\",{children:\"Transaction History\"})}),/*#__PURE__*/_jsx(\"div\",{children:transactionContent()})]})]})]});var notLoginContent=/*#__PURE__*/_jsx(\"main\",{className:styles[\"flex-wrap\"],children:/*#__PURE__*/_jsxs(\"h1\",{children:[\"Please \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Login\"}),\" to your account to see your account\"]})});return/*#__PURE__*/_jsxs(_Fragment,{children:[ctx.isLoggedIn?accountContent:notLoginContent,\";\"]});};export default MyAccount;","map":{"version":3,"names":["styles","Card","AuthContext","useContext","useState","Link","logout","ConfirmModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MyAccount","ctx","currentAccount","currentLogin","_useState","_useState2","_slicedToArray","option","setOption","_useState3","_useState4","amount","setAmount","_useState5","_useState6","isOpenModal","setIsOpenModal","optionsHandler","event","target","value","amountHandler","logoutHandler","onLogout","closeModalHandler","approveHandler","today","Date","console","log","onDeposit","concat","toLocaleDateString","toLocaleTimeString","money","onWithdrawal","alert","submitHandler","preventDefault","transactionContent","JSON","stringify","transaction","length","children","className","list","map","item","accountContent","onCloseModal","onApprove","container","onSubmit","welcome","firstName","type","onClick","src","alt","id","options","for","name","onChange","selected","min","max","require","actions","deposit","notLoginContent","to","isLoggedIn"],"sources":["C:/Users/nghia/Desktop/Learning Web Coding/banking-application/src/pages/MyAccount.js"],"sourcesContent":["import styles from \"./MyAccount.module.css\";\r\nimport Card from \"../components/UI/Card\";\r\nimport AuthContext from \"../store/auth-context\";\r\nimport { useContext, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { logout } from \"../assets\";\r\nimport ConfirmModal from \"../components/ConfirmModal/ConfirmModal\";\r\n\r\nconst MyAccount = () => {\r\n  const ctx = useContext(AuthContext);\r\n  const currentAccount = ctx.currentLogin;\r\n  const [option, setOption] = useState(\"Deposit\");\r\n  const [amount, setAmount] = useState(\"\");\r\n  const [isOpenModal, setIsOpenModal] = useState(false);\r\n\r\n  const optionsHandler = (event) => {\r\n    setOption(event.target.value);\r\n  };\r\n\r\n  const amountHandler = (event) => {\r\n    setAmount(event.target.value);\r\n  };\r\n\r\n  const logoutHandler = () => {\r\n    ctx.onLogout();\r\n  };\r\n\r\n  const closeModalHandler = () => {\r\n    setIsOpenModal(false);\r\n    setAmount(\"\");\r\n  };\r\n\r\n  const approveHandler = () => {\r\n    const today = new Date();\r\n    console.log(today);\r\n    if (option === \"Deposit\") {\r\n      ctx.onDeposit(\r\n        amount,\r\n        `Deposit $${amount} successfully on ${today.toLocaleDateString()} ${today.toLocaleTimeString()}`\r\n      );\r\n    } else if (option === \"Withdrawal\") {\r\n      if (currentAccount.money >= amount) {\r\n        ctx.onWithdrawal(\r\n          amount,\r\n          `Withdrawal $${amount} successfully on ${today.toLocaleDateString()} ${today.toLocaleTimeString()}`\r\n        );\r\n      } else alert(\"Sorry, you don't have enough fund to make this operation!\");\r\n    }\r\n    setIsOpenModal(false);\r\n    setAmount(\"\");\r\n  };\r\n\r\n  const submitHandler = (event) => {\r\n    event.preventDefault();\r\n    setIsOpenModal(true);\r\n  };\r\n\r\n  const transactionContent = () => {\r\n    if (JSON.stringify(currentAccount) !== \"{}\") {\r\n      if (currentAccount.transaction.length === 0)\r\n        return <h6>No transaction found.</h6>;\r\n      else\r\n        return (\r\n          <ul className={styles.list}>\r\n            {currentAccount.transaction.map((item) => {\r\n              return <li key={item}>{item}</li>;\r\n            })}\r\n          </ul>\r\n        );\r\n    } else return \"\";\r\n  };\r\n\r\n  const accountContent = (\r\n    <>\r\n      {isOpenModal && (\r\n        <ConfirmModal\r\n          onCloseModal={closeModalHandler}\r\n          onApprove={approveHandler}\r\n          amount={amount}\r\n          option={option}\r\n        />\r\n      )}\r\n      <main className={styles[\"flex-wrap\"]}>\r\n        <Card className={styles.container}>\r\n          <form onSubmit={submitHandler}>\r\n            <div className={styles.welcome}>\r\n              <h1>Hi {currentAccount.firstName}</h1>\r\n              <h2>Available balance: ${currentAccount.money}</h2>\r\n              <button type=\"button\" onClick={logoutHandler}>\r\n                <img src={logout} alt=\"Log out gif\" id={styles.logout} />\r\n              </button>\r\n            </div>\r\n            <div className={styles.options}>\r\n              <label for=\"options\">\r\n                Would you like to <b>deposit</b> or <b>withdrawal</b> money?\r\n              </label>\r\n              <select name=\"options\" id=\"options\" onChange={optionsHandler}>\r\n                <option value=\"Deposit\" selected>\r\n                  Deposit\r\n                </option>\r\n                <option value=\"Withdrawal\">Withdrawal</option>\r\n              </select>\r\n            </div>\r\n            <div className={styles.amount}>\r\n              <label for=\"amount\">Amount: </label>\r\n              <input\r\n                id=\"amount\"\r\n                type=\"number\"\r\n                onChange={amountHandler}\r\n                min=\"0\"\r\n                max=\"5000\"\r\n                value={amount}\r\n                require\r\n              />\r\n            </div>\r\n            <div className={styles.actions}>\r\n              <button className={option === \"Deposit\" ? styles.deposit : \"\"}>\r\n                {option}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </Card>\r\n        <Card className={styles[\"transaction-container\"]}>\r\n          <div className={styles.transaction}>\r\n            <h3>Transaction History</h3>\r\n          </div>\r\n          <div>{transactionContent()}</div>\r\n        </Card>\r\n      </main>\r\n    </>\r\n  );\r\n\r\n  const notLoginContent = (\r\n    <main className={styles[\"flex-wrap\"]}>\r\n      <h1>\r\n        Please <Link to=\"/\">Login</Link> to your account to see your account\r\n      </h1>\r\n    </main>\r\n  );\r\n\r\n  return <>{ctx.isLoggedIn ? accountContent : notLoginContent};</>;\r\n};\r\n\r\nexport default MyAccount;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}