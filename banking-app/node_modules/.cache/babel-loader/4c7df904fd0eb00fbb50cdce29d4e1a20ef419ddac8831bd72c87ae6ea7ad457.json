{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nghia\\\\Desktop\\\\Learning Web Coding\\\\banking-application\\\\src\\\\store\\\\AuthProvider.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport AuthContext from \"./auth-context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthProvider = props => {\n  _s();\n  const [currentLogin, setCurrentLogin] = useState({});\n  const [accounts, setAccounts] = useState([]);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [triggerFetched, setTriggerFetched] = useState(false);\n  useEffect(() => {\n    console.log(\"use effect ran\");\n    fetch(\"http://localhost:1337/api/accounts\").then(res => {\n      return res.json();\n    }).then(data => {\n      const accountsFetched = data.data;\n      console.log(accountsFetched[0].attributes.transaction);\n      setAccounts(accountsFetched);\n    });\n  }, [triggerFetched]);\n  const signupHandler = (firstName, lastName, email, password) => {\n    const requestOptions = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        data: {\n          firstName: firstName,\n          lastName: lastName,\n          email: email,\n          password: password,\n          balance: 0,\n          transaction: []\n        }\n      })\n    };\n    fetch(\"http://localhost:1337/api/accounts/\", requestOptions).then(res => {\n      console.log(res);\n      return res.json();\n    }).then(res => console.log(res));\n    // .then((data) => {\n    //   setCurrentLogin(data.data);\n    //   setTriggerFetched((prevState) => !prevState);\n    // });\n  };\n\n  const loginHandler = (email, password) => {\n    let isFound = false;\n    if (accounts.length === 0) isFound = false;\n    for (let i = 0; i < accounts.length; i++) {\n      if (accounts[i].attributes.email === email && accounts[i].attributes.password === password) {\n        setIsLoggedIn(true);\n        setCurrentLogin(accounts[i]);\n        isFound = true;\n        break;\n      }\n    }\n    if (!isFound) alert(\"Account not found!\");\n  };\n  const logoutHandler = () => {\n    setIsLoggedIn(false);\n    setCurrentLogin({});\n  };\n  const deposit = (amount, activity) => {\n    const newBalance = currentLogin.attributes.balance + parseInt(amount);\n    const requestOptions = {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        data: {\n          balance: newBalance,\n          transaction: [activity, ...currentLogin.attributes.transaction]\n        }\n      })\n    };\n    fetch(`http://localhost:1337/api/accounts/${currentLogin.id}`, requestOptions).then(res => res.json()).then(data => {\n      setCurrentLogin(data.data);\n      setTriggerFetched(prevState => !prevState);\n    });\n  };\n  const withdrawal = (amount, activity) => {\n    const newBalance = currentLogin.attributes.balance - parseInt(amount);\n    const requestOptions = {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        data: {\n          balance: newBalance,\n          transaction: [activity, ...currentLogin.attributes.transaction]\n        }\n      })\n    };\n    fetch(`http://localhost:1337/api/accounts/${currentLogin.id}`, requestOptions).then(res => res.json()).then(data => {\n      setCurrentLogin(data.data);\n      setTriggerFetched(prevState => !prevState);\n    });\n  };\n  const authContext = {\n    users: accounts,\n    isLoggedIn: isLoggedIn,\n    currentLogin: currentLogin,\n    onLogout: logoutHandler,\n    onLogin: loginHandler,\n    onSignup: signupHandler,\n    onDeposit: deposit,\n    onWithdrawal: withdrawal\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: authContext,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 135,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthProvider, \"Q1OnyeQVJG8jmBygb6kOemmXA+0=\");\n_c = AuthProvider;\nexport default AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["useEffect","useState","AuthContext","jsxDEV","_jsxDEV","AuthProvider","props","_s","currentLogin","setCurrentLogin","accounts","setAccounts","isLoggedIn","setIsLoggedIn","triggerFetched","setTriggerFetched","console","log","fetch","then","res","json","data","accountsFetched","attributes","transaction","signupHandler","firstName","lastName","email","password","requestOptions","method","headers","body","JSON","stringify","balance","loginHandler","isFound","length","i","alert","logoutHandler","deposit","amount","activity","newBalance","parseInt","id","prevState","withdrawal","authContext","users","onLogout","onLogin","onSignup","onDeposit","onWithdrawal","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/nghia/Desktop/Learning Web Coding/banking-application/src/store/AuthProvider.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport AuthContext from \"./auth-context\";\r\n\r\nconst AuthProvider = (props) => {\r\n  const [currentLogin, setCurrentLogin] = useState({});\r\n  const [accounts, setAccounts] = useState([]);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [triggerFetched, setTriggerFetched] = useState(false);\r\n\r\n  useEffect(() => {\r\n    console.log(\"use effect ran\");\r\n    fetch(\"http://localhost:1337/api/accounts\")\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        const accountsFetched = data.data;\r\n        console.log(accountsFetched[0].attributes.transaction);\r\n        setAccounts(accountsFetched);\r\n      });\r\n  }, [triggerFetched]);\r\n\r\n  const signupHandler = (firstName, lastName, email, password) => {\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        data: {\r\n          firstName: firstName,\r\n          lastName: lastName,\r\n          email: email,\r\n          password: password,\r\n          balance: 0,\r\n          transaction: [],\r\n        },\r\n      }),\r\n    };\r\n\r\n    fetch(\"http://localhost:1337/api/accounts/\", requestOptions)\r\n      .then((res) => {\r\n        console.log(res);\r\n        return res.json();\r\n      })\r\n      .then((res) => console.log(res));\r\n    // .then((data) => {\r\n    //   setCurrentLogin(data.data);\r\n    //   setTriggerFetched((prevState) => !prevState);\r\n    // });\r\n  };\r\n\r\n  const loginHandler = (email, password) => {\r\n    let isFound = false;\r\n    if (accounts.length === 0) isFound = false;\r\n\r\n    for (let i = 0; i < accounts.length; i++) {\r\n      if (\r\n        accounts[i].attributes.email === email &&\r\n        accounts[i].attributes.password === password\r\n      ) {\r\n        setIsLoggedIn(true);\r\n        setCurrentLogin(accounts[i]);\r\n        isFound = true;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (!isFound) alert(\"Account not found!\");\r\n  };\r\n\r\n  const logoutHandler = () => {\r\n    setIsLoggedIn(false);\r\n    setCurrentLogin({});\r\n  };\r\n\r\n  const deposit = (amount, activity) => {\r\n    const newBalance = currentLogin.attributes.balance + parseInt(amount);\r\n    const requestOptions = {\r\n      method: \"PUT\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        data: {\r\n          balance: newBalance,\r\n          transaction: [activity, ...currentLogin.attributes.transaction],\r\n        },\r\n      }),\r\n    };\r\n\r\n    fetch(\r\n      `http://localhost:1337/api/accounts/${currentLogin.id}`,\r\n      requestOptions\r\n    )\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        setCurrentLogin(data.data);\r\n        setTriggerFetched((prevState) => !prevState);\r\n      });\r\n  };\r\n\r\n  const withdrawal = (amount, activity) => {\r\n    const newBalance = currentLogin.attributes.balance - parseInt(amount);\r\n    const requestOptions = {\r\n      method: \"PUT\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        data: {\r\n          balance: newBalance,\r\n          transaction: [activity, ...currentLogin.attributes.transaction],\r\n        },\r\n      }),\r\n    };\r\n\r\n    fetch(\r\n      `http://localhost:1337/api/accounts/${currentLogin.id}`,\r\n      requestOptions\r\n    )\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        setCurrentLogin(data.data);\r\n        setTriggerFetched((prevState) => !prevState);\r\n      });\r\n  };\r\n\r\n  const authContext = {\r\n    users: accounts,\r\n    isLoggedIn: isLoggedIn,\r\n    currentLogin: currentLogin,\r\n    onLogout: logoutHandler,\r\n    onLogin: loginHandler,\r\n    onSignup: signupHandler,\r\n    onDeposit: deposit,\r\n    onWithdrawal: withdrawal,\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={authContext}>\r\n      {props.children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}